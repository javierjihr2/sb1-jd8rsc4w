(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7835],{11882:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(95155),r=t(12115),o=t(66695),l=t(30285),i=t(26126),n=t(62523),d=t(17313),c=t(75074),u=t(9572),m=t(51920),g=t(17607),p=t(68098),f=t(94063),h=t(67491),x=t(35695),v=t(26715),j=t(5041),b=t(73265),N=t(77548),k=t(10988);(0,N.Uz)();let y={all:["news"],lists:()=>[...y.all,"list"],list:e=>[...y.lists(),{filters:e}],details:()=>[...y.all,"detail"],detail:e=>[...y.details(),e]};function w(){let{user:e}=(0,h.A)(),s=(0,x.useRouter)(),[t,N]=(0,r.useState)(""),[w,S]=(0,r.useState)("all"),[P,_]=(0,r.useState)(new Set),{data:A=[],isLoading:U}=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,[t,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[i,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{l(!0),n(null);let t=await (0,k.RJ)(s,e);a(t)}catch(e){n(e),console.error("Error loading articles:",e)}finally{l(!1)}})()},[e,s]),{data:t,isLoading:o,error:i,refetch:()=>{(async()=>{try{l(!0);let t=await (0,k.RJ)(s,e);a(t)}catch(e){n(e)}finally{l(!1)}})()}}}("all"===w?void 0:w,20),C=function(){let e=(0,v.jE)(),{user:s}=(0,b.kH)(),{isOnline:t,addPendingOperation:a}=(0,b.CU)();return(0,j.n)({mutationFn:async e=>{if(!s)throw Error("Usuario no autenticado");let t=await (0,k.dE)(e,s.uid);if(!t.success)throw Error("Error al dar like al art\xedculo");return t},onMutate:async e=>{t||a({id:"like-article-".concat(e,"-").concat(Date.now()),type:"likeArticle",data:{articleId:e},timestamp:Date.now()})},onSuccess:()=>{e.invalidateQueries({queryKey:y.all})}})}(),E=async s=>{if(e)try{await C.mutateAsync(s),_(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})}catch(e){console.error("Error liking article:",e)}},I=A.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())||e.summary.toLowerCase().includes(t.toLowerCase())),O=e=>{s.push("/news/".concat(e))};return(0,a.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Noticias y Actualizaciones"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Mantente al d\xeda con las \xfaltimas noticias del mundo gaming"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.p,{placeholder:"Buscar noticias...",value:t,onChange:e=>N(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mt-3 text-muted-foreground"}),(0,a.jsx)(d.tU,{value:w,onValueChange:S,children:(0,a.jsx)(d.j7,{children:["all","eSports","Updates","Events","Guides"].map(e=>(0,a.jsx)(d.Xi,{value:e,children:"all"===e?"Todas":e},e))})})]})]}),U?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,a.jsxs)(o.Zp,{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-48 bg-muted rounded-t-lg"}),(0,a.jsxs)(o.aR,{children:[(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-muted rounded w-1/2"})]}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-3 bg-muted rounded"}),(0,a.jsx)("div",{className:"h-3 bg-muted rounded w-5/6"})]})})]},s))}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(e=>{var s;return(0,a.jsxs)(o.Zp,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group",children:[(0,a.jsxs)("div",{className:"relative h-48 overflow-hidden",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),(0,a.jsx)("div",{className:"absolute top-2 left-2",children:(0,a.jsx)(i.E,{variant:"secondary",children:e.category})})]}),(0,a.jsxs)(o.aR,{children:[(0,a.jsx)(o.ZB,{className:"line-clamp-2 group-hover:text-primary transition-colors",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:new Date(e.date).toLocaleDateString()}),e.author&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:e.author})]})]})]}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3",children:e.summary}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.views||0})]}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),E(e.id)},className:"flex items-center gap-1 hover:text-red-500 transition-colors ".concat(P.has(e.id)?"text-red-500":""),children:[(0,a.jsx)(p.A,{className:"h-3 w-3 ".concat(P.has(e.id)?"fill-current":"")}),(0,a.jsx)("span",{children:e.likes||0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:(null==(s=e.comments)?void 0:s.length)||0})]})]}),(0,a.jsx)(l.$,{size:"sm",variant:"outline",onClick:s=>{s.stopPropagation(),O(e.id)},children:"Leer m\xe1s"})]})]})]},e.id)})}),!U&&0===I.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"text-muted-foreground",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No se encontraron art\xedculos"}),(0,a.jsx)("p",{className:"text-sm",children:"Intenta con otros t\xe9rminos de b\xfasqueda o categor\xeda"})]})})]})}},17313:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>c,j7:()=>n,tU:()=>i});var a=t(95155),r=t(12115),o=t(60704),l=t(59434);let i=o.bL,n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(o.B8,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});n.displayName=o.B8.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(o.l9,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});d.displayName=o.l9.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(o.UC,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});c.displayName=o.UC.displayName},25931:(e,s,t)=>{Promise.resolve().then(t.bind(t,11882))},59434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>o});var a=t(52596),r=t(39688);function o(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},62523:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(95155),r=t(12115),o=t(59434);let l=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});l.displayName="Input"},67491:(e,s,t)=>{"use strict";t.d(s,{A:()=>d,AuthProvider:()=>n});var a=t(95155),r=t(12115),o=t(24903),l=t(56104);let i=(0,r.createContext)({user:null,loading:!0}),n=e=>{let{children:s}=e,[t,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{console.log("\uD83D\uDD27 AuthProvider - Configurando listener de autenticaci\xf3n"),(()=>{{let e=localStorage.getItem("squadgo_user"),s=localStorage.getItem("squadgo_user_backup");if(e||s)try{let t=JSON.parse(e||s||"{}");console.log("\uD83D\uDD04 AuthProvider - Intentando recuperar sesi\xf3n desde localStorage:",t.uid)}catch(e){console.error("❌ Error recuperando usuario desde localStorage:",e),localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}}})();let e=(0,o.onAuthStateChanged)(l.j2,async e=>{if(console.log("\uD83D\uDD04 AuthProvider - Estado de autenticaci\xf3n cambi\xf3:",{uid:null==e?void 0:e.uid,email:null==e?void 0:e.email,emailVerified:null==e?void 0:e.emailVerified}),e)try{console.log("✅ AuthProvider - Usuario autenticado"),n(e);{let s={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",emailVerified:e.emailVerified,lastUpdate:Date.now(),sessionId:Math.random().toString(36).substring(2,11)};localStorage.setItem("squadgo_user",JSON.stringify(s)),localStorage.setItem("squadgo_user_backup",JSON.stringify(s));let t=new CustomEvent("userAuthenticated",{detail:{user:e}});window.dispatchEvent(t)}}catch(e){console.error("❌ AuthProvider - Error procesando usuario:",e),n(null),localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}else{console.log("\uD83D\uDEAB AuthProvider - Usuario no autenticado"),n(null);{let e=localStorage.getItem("squadgo_user_backup");if(e)try{let s=JSON.parse(e);Date.now()-(s.lastUpdate||0)>864e5?(localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup"),console.log("\uD83E\uDDF9 Limpiando datos de sesi\xf3n expirados")):console.log("\uD83D\uDD04 Manteniendo backup de sesi\xf3n reciente")}catch(e){localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}else localStorage.removeItem("squadgo_user")}}c(!1)});return()=>{console.log("\uD83E\uDDF9 AuthProvider - Limpiando listener de autenticaci\xf3n"),e()}},[]),(0,a.jsx)(i.Provider,{value:{user:t,loading:d},children:s})},d=()=>(0,r.useContext)(i)},73265:(e,s,t)=>{"use strict";t.d(s,{CU:()=>d,Fg:()=>n,SE:()=>l,kH:()=>o,lA:()=>i});var a=t(88693),r=t(46786);let o=(0,a.vt)()((0,r.Zr)(e=>({user:null,profile:null,setUser:s=>e({user:s}),setProfile:s=>e({profile:s}),clearUser:()=>e({user:null,profile:null})}),{name:"user-storage",storage:(0,r.KU)(()=>localStorage),partialize:e=>({profile:e.profile})})),l=(0,a.vt)()((0,r.Zr)(e=>({posts:[],bookmarkedPosts:[],setPosts:s=>e({posts:s}),addPost:s=>e(e=>({posts:[s,...e.posts]})),updatePost:(s,t)=>e(e=>({posts:e.posts.map(e=>e.id===s?{...e,...t}:e)})),removePost:s=>e(e=>({posts:e.posts.filter(e=>e.id!==s)})),toggleBookmark:s=>e(e=>({bookmarkedPosts:e.bookmarkedPosts.includes(s)?e.bookmarkedPosts.filter(e=>e!==s):[...e.bookmarkedPosts,s]})),optimisticLike:(s,t)=>e(e=>({posts:e.posts.map(e=>{if(e.id===s){let s=[...e.likedBy||[]];return s.includes(t)||s.push(t),{...e,likedBy:s,likes:(e.likes||0)+1}}return e})})),optimisticUnlike:(s,t)=>e(e=>({posts:e.posts.map(e=>{if(e.id===s){let s=(e.likedBy||[]).filter(e=>e!==t);return{...e,likedBy:s,likes:Math.max((e.likes||0)-1,0)}}return e})}))}),{name:"posts-storage",storage:(0,r.KU)(()=>localStorage),partialize:e=>({bookmarkedPosts:e.bookmarkedPosts})})),i=(0,a.vt)()((0,r.Zr)(e=>({tournaments:[],userTournaments:[],setTournaments:s=>e({tournaments:s}),addTournament:s=>e(e=>({tournaments:[s,...e.tournaments]})),updateTournament:(s,t)=>e(e=>({tournaments:e.tournaments.map(e=>e.id===s?{...e,...t}:e)})),joinTournament:s=>e(e=>({userTournaments:[...e.userTournaments,s]})),leaveTournament:s=>e(e=>({userTournaments:e.userTournaments.filter(e=>e!==s)}))}),{name:"tournaments-storage",storage:(0,r.KU)(()=>localStorage),partialize:e=>({userTournaments:e.userTournaments})})),n=(0,a.vt)()((0,r.Zr)(e=>({isSearching:!1,currentTicket:null,preferences:{gameMode:"classic",region:"na",rank:"bronze",language:"es",microphone:!0},setSearching:s=>e({isSearching:s}),setCurrentTicket:s=>e({currentTicket:s}),updatePreferences:s=>e(e=>({preferences:{...e.preferences,...s}}))}),{name:"matchmaking-storage",storage:(0,r.KU)(()=>localStorage)})),d=(0,a.vt)()(e=>({isOnline:!0,pendingOperations:[],setOnline:s=>e({isOnline:s}),addPendingOperation:s=>e(e=>({pendingOperations:[...e.pendingOperations,s]})),removePendingOperation:s=>e(e=>({pendingOperations:e.pendingOperations.filter(e=>e.id!==s)})),clearPendingOperations:()=>e({pendingOperations:[]})}))}},e=>{var s=s=>e(e.s=s);e.O(0,[9135,7210,5769,9863,3856,7436,1144,1216,9892,988,8441,1684,7358],()=>s(25931)),_N_E=e.O()}]);