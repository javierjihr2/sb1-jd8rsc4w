(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{47262:(e,a,s)=>{"use strict";s.d(a,{S:()=>o});var r=s(95155),l=s(12115),t=s(76981),i=s(10518),n=s(59434);let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(t.bL,{ref:a,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...l,children:(0,r.jsx)(t.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})})});o.displayName=t.bL.displayName},59409:(e,a,s)=>{"use strict";s.d(a,{bq:()=>h,eb:()=>v,gC:()=>g,l6:()=>d,s3:()=>u,yv:()=>m});var r=s(95155),l=s(12115),t=s(43433),i=s(79556),n=s(77381),o=s(10518),c=s(59434);let d=t.bL,u=t.YJ,m=t.WT,h=l.forwardRef((e,a)=>{let{className:s,children:l,...n}=e;return(0,r.jsxs)(t.l9,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[l,(0,r.jsx)(t.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=t.l9.displayName;let p=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(t.PP,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=t.PP.displayName;let x=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(t.wn,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=t.wn.displayName;let g=l.forwardRef((e,a)=>{let{className:s,children:l,position:i="popper",...n}=e;return(0,r.jsx)(t.ZL,{children:(0,r.jsxs)(t.UC,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,r.jsx)(p,{}),(0,r.jsx)(t.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,r.jsx)(x,{})]})})});g.displayName=t.UC.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(t.JU,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})}).displayName=t.JU.displayName;let v=l.forwardRef((e,a)=>{let{className:s,children:l,...i}=e;return(0,r.jsxs)(t.q7,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(t.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),(0,r.jsx)(t.p4,{children:l})]})});v.displayName=t.q7.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(t.wv,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=t.wv.displayName},59434:(e,a,s)=>{"use strict";s.d(a,{cn:()=>t});var r=s(52596),l=s(39688);function t(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,l.QP)((0,r.$)(a))}},64948:(e,a,s)=>{Promise.resolve().then(s.bind(s,96952))},67491:(e,a,s)=>{"use strict";s.d(a,{A:()=>c,AuthProvider:()=>o});var r=s(95155),l=s(12115),t=s(24903),i=s(56104);let n=(0,l.createContext)({user:null,loading:!0}),o=e=>{let{children:a}=e,[s,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{console.log("\uD83D\uDD27 AuthProvider - Configurando listener de autenticaci\xf3n"),(()=>{{let e=localStorage.getItem("squadgo_user"),a=localStorage.getItem("squadgo_user_backup");if(e||a)try{let s=JSON.parse(e||a||"{}");console.log("\uD83D\uDD04 AuthProvider - Intentando recuperar sesi\xf3n desde localStorage:",s.uid)}catch(e){console.error("❌ Error recuperando usuario desde localStorage:",e),localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}}})();let e=(0,t.onAuthStateChanged)(i.j2,async e=>{if(console.log("\uD83D\uDD04 AuthProvider - Estado de autenticaci\xf3n cambi\xf3:",{uid:null==e?void 0:e.uid,email:null==e?void 0:e.email,emailVerified:null==e?void 0:e.emailVerified}),e)try{console.log("✅ AuthProvider - Usuario autenticado"),o(e);{let a={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",emailVerified:e.emailVerified,lastUpdate:Date.now(),sessionId:Math.random().toString(36).substring(2,11)};localStorage.setItem("squadgo_user",JSON.stringify(a)),localStorage.setItem("squadgo_user_backup",JSON.stringify(a));let s=new CustomEvent("userAuthenticated",{detail:{user:e}});window.dispatchEvent(s)}}catch(e){console.error("❌ AuthProvider - Error procesando usuario:",e),o(null),localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}else{console.log("\uD83D\uDEAB AuthProvider - Usuario no autenticado"),o(null);{let e=localStorage.getItem("squadgo_user_backup");if(e)try{let a=JSON.parse(e);Date.now()-(a.lastUpdate||0)>864e5?(localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup"),console.log("\uD83E\uDDF9 Limpiando datos de sesi\xf3n expirados")):console.log("\uD83D\uDD04 Manteniendo backup de sesi\xf3n reciente")}catch(e){localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}else localStorage.removeItem("squadgo_user")}}d(!1)});return()=>{console.log("\uD83E\uDDF9 AuthProvider - Limpiando listener de autenticaci\xf3n"),e()}},[]),(0,r.jsx)(n.Provider,{value:{user:s,loading:c},children:a})},c=()=>(0,l.useContext)(n)},85057:(e,a,s)=>{"use strict";s.d(a,{J:()=>c});var r=s(95155),l=s(12115),t=s(40968),i=s(74466),n=s(59434);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(t.b,{ref:a,className:(0,n.cn)(o(),s),...l})});c.displayName=t.b.displayName},87481:(e,a,s)=>{"use strict";s.d(a,{dj:()=>m,oR:()=>u});var r=s(12115);let l=0,t=new Map,i=e=>{if(t.has(e))return;let a=setTimeout(()=>{t.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);t.set(e,a)},n=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=a;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],c={toasts:[]};function d(e){c=n(c,e),o.forEach(e=>{e(c)})}function u(e){let{...a}=e,s=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,a]=r.useState(c);return r.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,a,s)=>{"use strict";s.d(a,{T:()=>i});var r=s(95155),l=s(12115),t=s(59434);let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...l})});i.displayName="Textarea"},96952:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>V});var r=s(95155),l=s(12115),t=s(67491),i=s(35695),n=s(30285),o=s(66695),c=s(62523),d=s(85057),u=s(59409),m=s(88539),h=s(47262),p=s(87481),x=s(10988),g=s(91721),v=s(67933),f=s(48646),j=s(57679),b=s(51920),N=s(91394),y=s(25318),w=s(16923),C=s(93112),S=s(59434),k=s(66766),A=s(30411),I=s(89067),P=s(54165),R=s(54073);let M=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsxs)(R.bL,{ref:a,className:(0,S.cn)("relative flex w-full touch-none select-none items-center",s),...l,children:[(0,r.jsx)(R.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(R.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(R.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});M.displayName=R.bL.displayName;var E=s(799),T=s(8531),_=s(10518);function q(e){let{open:a,onOpenChange:s,imageSrc:t,onCropComplete:i,aspectRatio:o,type:c}=e,{toast:u}=(0,p.dj)(),m=(0,l.useRef)(null),h=(0,l.useRef)(null),[x,g]=(0,l.useState)([1]),[v,f]=(0,l.useState)(0),[j,b]=(0,l.useState)({x:0,y:0}),[N,w]=(0,l.useState)(!1),[S,k]=(0,l.useState)({x:0,y:0}),A=o||("avatar"===c?1:16/9),I=(0,l.useCallback)(e=>{w(!0),k({x:e.clientX-j.x,y:e.clientY-j.y})},[j]),R=(0,l.useCallback)(e=>{N&&b({x:e.clientX-S.x,y:e.clientY-S.y})},[N,S]),q=(0,l.useCallback)(()=>{w(!1)},[]),J=(0,l.useCallback)(()=>{let e=m.current,a=h.current;if(!e||!a)return;let r=e.getContext("2d");if(!r)return;let l="avatar"===c?300:800,t="avatar"===c?300:Math.round(800/A);e.width=l,e.height=t,r.clearRect(0,0,l,t),r.save(),r.translate(l/2,t/2),r.rotate(v*Math.PI/180),r.scale(x[0],x[0]),r.translate(-l/2,-t/2),r.translate(j.x,j.y),r.drawImage(a,0,0,l,t),r.restore(),i(e.toDataURL("image/jpeg",.9)),s(!1),u({title:"Imagen procesada",description:"La imagen ha sido recortada y redimensionada correctamente."})},[x,v,j,c,A,i,s,u]);return(0,r.jsx)(P.lG,{open:a,onOpenChange:s,children:(0,r.jsxs)(P.Cf,{className:"sm:max-w-[600px]",children:[(0,r.jsxs)(P.c7,{children:[(0,r.jsxs)(P.L3,{className:"flex items-center gap-2",children:[(0,r.jsx)(C.A,{className:"h-5 w-5"}),"Ajustar ","avatar"===c?"Foto de Perfil":"Foto de Portada"]}),(0,r.jsx)(P.rr,{children:"Arrastra, redimensiona y rota tu imagen para obtener el mejor resultado."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative bg-muted rounded-lg overflow-hidden",style:{aspectRatio:A,height:"300px"},children:[(0,r.jsx)("div",{className:"absolute inset-0 cursor-move",onMouseDown:I,onMouseMove:R,onMouseUp:q,onMouseLeave:q,children:(0,r.jsx)("img",{ref:h,src:t,alt:"Preview",className:"absolute inset-0 w-full h-full object-contain select-none",style:{transform:"translate(".concat(j.x,"px, ").concat(j.y,"px) scale(").concat(x[0],") rotate(").concat(v,"deg)"),transformOrigin:"center"},draggable:!1})}),(0,r.jsx)("div",{className:"absolute inset-0 border-2 border-primary border-dashed pointer-events-none"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(d.J,{className:"flex items-center gap-2",children:[(0,r.jsx)(E.A,{className:"h-4 w-4"}),"Zoom: ",x[0].toFixed(1),"x"]}),(0,r.jsx)(M,{value:x,onValueChange:g,min:.5,max:3,step:.1,className:"w-full"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(d.J,{className:"flex items-center gap-2",children:[(0,r.jsx)(T.A,{className:"h-4 w-4"}),"Rotaci\xf3n: ",v,"\xb0"]}),(0,r.jsx)(M,{value:[v],onValueChange:e=>f(e[0]),min:-180,max:180,step:15,className:"w-full"})]}),(0,r.jsxs)(n.$,{variant:"outline",onClick:()=>{g([1]),f(0),b({x:0,y:0})},className:"w-full",children:[(0,r.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Restablecer"]})]})]}),(0,r.jsxs)(P.Es,{children:[(0,r.jsxs)(n.$,{variant:"outline",onClick:()=>s(!1),children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,r.jsxs)(n.$,{onClick:J,children:[(0,r.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Aplicar"]})]}),(0,r.jsx)("canvas",{ref:m,className:"hidden"})]})})}function J(e){let{currentImage:a,onImageChange:s,type:t,className:i,disabled:c=!1}=e,{toast:d}=(0,p.dj)(),{permissions:u}=(0,A.S)(),m=(0,l.useRef)(null),[h,x]=(0,l.useState)(!1),[f,j]=(0,l.useState)(!1),[b,P]=(0,l.useState)(!1),[R,M]=(0,l.useState)(""),E=async e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){if(!s.type.startsWith("image/"))return void d({title:"Error",description:"Por favor selecciona un archivo de imagen v\xe1lido.",variant:"destructive"});if(s.size>0xa00000)return void d({title:"Error",description:"La imagen es demasiado grande. M\xe1ximo 10MB.",variant:"destructive"});x(!0);try{let e=new FileReader;e.onload=e=>{var a;let s=null==(a=e.target)?void 0:a.result;M(s),P(!0),x(!1)},e.onerror=()=>{x(!1),d({title:"Error",description:"Error al cargar la imagen.",variant:"destructive"})},e.readAsDataURL(s)}catch(e){x(!1),d({title:"Error",description:"Error al procesar la imagen.",variant:"destructive"})}e.target.value=""}},T=()=>{s(null),d({title:"Imagen eliminada",description:"La imagen ha sido eliminada correctamente."})},_=()=>{var e;null==(e=m.current)||e.click()},J=async()=>{if(!u.camera)return void j(!0);let e=document.createElement("input");e.type="file",e.accept="image/*",e.capture="environment",e.onchange=e=>{let a=e.target;a.files&&a.files[0]&&E({target:a,currentTarget:a,preventDefault:()=>{},stopPropagation:()=>{}})},e.click()},F=e=>{j(!1),e&&u.camera&&J()},O=e=>{s(e),M(""),d({title:"\xc9xito",description:"Imagen procesada y guardada correctamente."})},U=()=>{a&&(M(a),P(!0))};return"avatar"===t?(0,r.jsxs)("div",{className:(0,S.cn)("relative",i),children:[(0,r.jsxs)(N.eu,{className:"h-24 w-24 cursor-pointer",onClick:c?void 0:_,children:[(0,r.jsx)(N.BK,{src:a}),(0,r.jsx)(N.q5,{className:"bg-muted",children:a?(0,r.jsx)(g.A,{className:"h-8 w-8"}):(0,r.jsx)(v.A,{className:"h-8 w-8"})})]}),a&&!c&&(0,r.jsx)(n.$,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:T,children:(0,r.jsx)(y.A,{className:"h-3 w-3"})}),!c&&(0,r.jsxs)("div",{className:"absolute -bottom-2 -right-2 flex gap-1",children:[(0,r.jsx)(n.$,{variant:"secondary",size:"icon",className:"h-6 w-6 rounded-full",onClick:_,disabled:h,title:"Subir desde galer\xeda",children:(0,r.jsx)(w.A,{className:"h-3 w-3"})}),(0,r.jsx)(n.$,{variant:"secondary",size:"icon",className:"h-6 w-6 rounded-full",onClick:J,disabled:h,title:"Tomar foto",children:(0,r.jsx)(v.A,{className:"h-3 w-3"})}),a&&(0,r.jsx)(n.$,{variant:"secondary",size:"icon",className:"h-6 w-6 rounded-full",onClick:U,disabled:h,title:"Editar imagen",children:(0,r.jsx)(C.A,{className:"h-3 w-3"})})]}),(0,r.jsx)("input",{ref:m,type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:c}),(0,r.jsx)(I.v,{open:f,onOpenChange:j,requiredPermissions:["camera"],title:"Permiso de C\xe1mara",description:"Para tomar fotos, necesitamos acceso a tu c\xe1mara.",onComplete:F}),(0,r.jsx)(q,{open:b,onOpenChange:P,imageSrc:R,onCropComplete:O,type:t})]}):(0,r.jsxs)(o.Zp,{className:(0,S.cn)("relative overflow-hidden",i),children:[(0,r.jsxs)(o.Wu,{className:"p-0",children:[(0,r.jsxs)("div",{className:"relative h-32 w-full bg-muted flex items-center justify-center",children:[a?(0,r.jsx)(k.default,{src:a,alt:"Foto de portada",fill:!0,className:"object-cover"}):(0,r.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,r.jsx)(v.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm",children:"Foto de portada"})]}),!c&&(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,r.jsxs)(n.$,{variant:"secondary",size:"sm",onClick:_,disabled:h,children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),a?"Cambiar":"Subir"]}),(0,r.jsxs)(n.$,{variant:"secondary",size:"sm",onClick:J,disabled:h,children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"C\xe1mara"]}),a&&(0,r.jsxs)(n.$,{variant:"secondary",size:"sm",onClick:U,disabled:h,children:[(0,r.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Editar"]}),a&&(0,r.jsxs)(n.$,{variant:"destructive",size:"sm",onClick:T,children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]}),(0,r.jsx)("input",{ref:m,type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:c})]}),(0,r.jsx)(I.v,{open:f,onOpenChange:j,requiredPermissions:["camera"],title:"Permiso de C\xe1mara",description:"Para tomar fotos, necesitamos acceso a tu c\xe1mara.",onComplete:F}),(0,r.jsx)(q,{open:b,onOpenChange:P,imageSrc:R,onCropComplete:O,type:t})]})}let F=[{value:"na",label:"Am\xe9rica del Norte"},{value:"sa",label:"Am\xe9rica del Sur"},{value:"eu",label:"Europa"},{value:"asia",label:"Asia"},{value:"kr-jp",label:"Corea/Jap\xf3n"},{value:"me",label:"Medio Oriente"}],O=["M416","AKM","SCAR-L","M16A4","Groza","AUG A3","Kar98k","M24","AWM","Mini14","SLR","SKS","UMP45","Vector","Thompson","PP-19 Bizon","S686","S1897","S12K","DBS"],U=[{value:"erangel",label:"Erangel"},{value:"miramar",label:"Miramar"},{value:"sanhok",label:"Sanhok"},{value:"vikendi",label:"Vikendi"},{value:"livik",label:"Livik"},{value:"rondo",label:"Rondo"}],D=["Bronce","Plata","Oro","Platino","Diamante","Corona","As","Conquistador"],L=["Ma\xf1ana (6:00 - 12:00)","Tarde (12:00 - 18:00)","Noche (18:00 - 24:00)","Madrugada (00:00 - 6:00)","Fines de semana","Horario flexible"];function B(e){let{onComplete:a}=e,{user:s}=(0,t.A)(),{toast:N}=(0,p.dj)(),y=(0,i.useRouter)(),[w,C]=(0,l.useState)(!1),[S,k]=(0,l.useState)({nickname:"",username:"",gameId:"",currentServer:"",gender:"",age:"",rank:"",bio:"",favoriteMap:"",playSchedule:"",favoriteWeapons:[],level:"",wins:"",kills:"",kdRatio:"",avatarUrl:"",coverPhotoUrl:""}),A=e=>{k(a=>({...a,favoriteWeapons:a.favoriteWeapons.includes(e)?a.favoriteWeapons.filter(a=>a!==e):[...a.favoriteWeapons,e].slice(0,3)}))},I=async e=>{if(e.preventDefault(),s){C(!0);try{let e={name:S.nickname||S.username,nickname:S.nickname,username:S.username,gameId:S.gameId,currentServer:S.currentServer,gender:S.gender,age:S.age?parseInt(S.age):void 0,rank:S.rank,bio:S.bio,favoriteMap:S.favoriteMap,playSchedule:S.playSchedule,favoriteWeapons:S.favoriteWeapons,level:S.level?parseInt(S.level):1,stats:{kda:S.kdRatio?parseFloat(S.kdRatio):0,wins:S.wins?parseInt(S.wins):0,matches:0},kills:S.kills?parseInt(S.kills):0,kdRatio:S.kdRatio?parseFloat(S.kdRatio):0,role:"Jugador",avatarUrl:s.photoURL||"https://placehold.co/100x100.png",email:s.email||"",location:{lat:0,lon:0},countryCode:"MX"};if((await (0,x.Vz)(s.uid,e)).success)N({title:"\xa1Perfil completado!",description:"Tu perfil ha sido configurado exitosamente."}),a(),y.push("/dashboard");else throw Error("Error al crear el perfil")}catch(e){console.error("Error:",e),N({title:"Error",description:"No se pudo completar tu perfil. Int\xe9ntalo de nuevo.",variant:"destructive"})}finally{C(!1)}}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"\xa1Completa tu perfil de jugador!"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Ay\xfadanos a conocerte mejor para conectarte con los jugadores perfectos"})]}),(0,r.jsxs)("form",{onSubmit:I,className:"space-y-8",children:[(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"h-5 w-5"}),"Informaci\xf3n Personal"]}),(0,r.jsx)(o.BT,{children:"Cu\xe9ntanos sobre ti como jugador"})]}),(0,r.jsxs)(o.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"nickname",children:"Nickname del Juego *"}),(0,r.jsx)(c.p,{id:"nickname",placeholder:"Tu nombre en PUBG Mobile",value:S.nickname,onChange:e=>k(a=>({...a,nickname:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"username",children:"Nombre de Usuario *"}),(0,r.jsx)(c.p,{id:"username",placeholder:"Como quieres que te conozcan",value:S.username,onChange:e=>k(a=>({...a,username:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"gameId",children:"ID del Juego *"}),(0,r.jsx)(c.p,{id:"gameId",placeholder:"Tu ID num\xe9rico de PUBG Mobile",value:S.gameId,onChange:e=>k(a=>({...a,gameId:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"age",children:"Edad *"}),(0,r.jsx)(c.p,{id:"age",type:"number",min:"13",max:"99",placeholder:"Tu edad",value:S.age,onChange:e=>k(a=>({...a,age:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"gender",children:"G\xe9nero"}),(0,r.jsxs)(u.l6,{onValueChange:e=>k(a=>({...a,gender:e})),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Selecciona tu g\xe9nero"})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"Masculino",children:"Masculino"}),(0,r.jsx)(u.eb,{value:"Femenino",children:"Femenino"}),(0,r.jsx)(u.eb,{value:"Otro",children:"Otro"}),(0,r.jsx)(u.eb,{value:"Prefiero no decir",children:"Prefiero no decir"})]})]})]})]})]}),(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"h-5 w-5"}),"Fotos de Perfil"]}),(0,r.jsx)(o.BT,{children:"Agrega tu foto de perfil y portada (opcional)"})]}),(0,r.jsx)(o.Wu,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{children:"Foto de Perfil"}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(J,{currentImage:S.avatarUrl,onImageChange:e=>k(a=>({...a,avatarUrl:e||""})),type:"avatar"})}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Opcional - Puedes agregar tu foto despu\xe9s"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{children:"Foto de Portada"}),(0,r.jsx)(J,{currentImage:S.coverPhotoUrl,onImageChange:e=>k(a=>({...a,coverPhotoUrl:e||""})),type:"cover"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Opcional - Personaliza tu perfil con una imagen de portada"})]})]})})]}),(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(f.A,{className:"h-5 w-5"}),"Informaci\xf3n del Juego"]}),(0,r.jsx)(o.BT,{children:"Detalles sobre tu experiencia en PUBG Mobile"})]}),(0,r.jsxs)(o.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"currentServer",children:"Servidor Actual *"}),(0,r.jsxs)(u.l6,{onValueChange:e=>k(a=>({...a,currentServer:e})),required:!0,children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Selecciona tu servidor"})}),(0,r.jsx)(u.gC,{children:F.map(e=>(0,r.jsx)(u.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"rank",children:"Rango Actual *"}),(0,r.jsxs)(u.l6,{onValueChange:e=>k(a=>({...a,rank:e})),required:!0,children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Selecciona tu rango"})}),(0,r.jsx)(u.gC,{children:D.map(e=>(0,r.jsx)(u.eb,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"level",children:"Nivel"}),(0,r.jsx)(c.p,{id:"level",type:"number",min:"1",max:"100",placeholder:"Tu nivel actual",value:S.level,onChange:e=>k(a=>({...a,level:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"favoriteMap",children:"Mapa Favorito"}),(0,r.jsxs)(u.l6,{onValueChange:e=>k(a=>({...a,favoriteMap:e})),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Selecciona tu mapa favorito"})}),(0,r.jsx)(u.gC,{children:U.map(e=>(0,r.jsx)(u.eb,{value:e.value,children:e.label},e.value))})]})]})]})]}),(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(j.A,{className:"h-5 w-5"}),"Estad\xedsticas"]}),(0,r.jsx)(o.BT,{children:"Comparte tus estad\xedsticas para mejores recomendaciones"})]}),(0,r.jsxs)(o.Wu,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"wins",children:"Victorias"}),(0,r.jsx)(c.p,{id:"wins",type:"number",min:"0",placeholder:"N\xfamero de victorias",value:S.wins,onChange:e=>k(a=>({...a,wins:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"kills",children:"Bajas Totales"}),(0,r.jsx)(c.p,{id:"kills",type:"number",min:"0",placeholder:"N\xfamero de bajas",value:S.kills,onChange:e=>k(a=>({...a,kills:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"kdRatio",children:"K/D Ratio"}),(0,r.jsx)(c.p,{id:"kdRatio",type:"number",step:"0.1",min:"0",placeholder:"Tu K/D ratio",value:S.kdRatio,onChange:e=>k(a=>({...a,kdRatio:e.target.value}))})]})]})]}),(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(b.A,{className:"h-5 w-5"}),"Preferencias de Juego"]}),(0,r.jsx)(o.BT,{children:"Ay\xfadanos a encontrar compa\xf1eros compatibles"})]}),(0,r.jsxs)(o.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"playSchedule",children:"Horario de Juego"}),(0,r.jsxs)(u.l6,{onValueChange:e=>k(a=>({...a,playSchedule:e})),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"\xbfCu\xe1ndo sueles jugar?"})}),(0,r.jsx)(u.gC,{children:L.map(e=>(0,r.jsx)(u.eb,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{children:"Armas Favoritas (m\xe1ximo 3)"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:O.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.S,{id:e,checked:S.favoriteWeapons.includes(e),onCheckedChange:()=>A(e),disabled:!S.favoriteWeapons.includes(e)&&S.favoriteWeapons.length>=3}),(0,r.jsx)(d.J,{htmlFor:e,className:"text-sm",children:e})]},e))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"bio",children:"Biograf\xeda"}),(0,r.jsx)(m.T,{id:"bio",placeholder:"Cu\xe9ntanos sobre tu estilo de juego, experiencia y qu\xe9 buscas en un compa\xf1ero de equipo...",value:S.bio,onChange:e=>k(a=>({...a,bio:e.target.value})),className:"min-h-[100px]"})]})]})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(n.$,{type:"submit",size:"lg",disabled:w,className:"w-full md:w-auto",children:w?"Guardando...":"Completar Perfil"})})]})]})}var z=s(50172);function V(){let{user:e,loading:a}=(0,t.A)(),s=(0,i.useRouter)(),[n,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(async()=>{if(!a&&!e)return s.push("/login");if(e)try{let a=await (0,x.VM)(e.uid);if(a&&a.nickname)return void s.push("/dashboard")}catch(e){console.error("Error checking user profile:",e)}o(!1)})()},[e,a,s]),a||n)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)(z.A,{className:"h-8 w-8 animate-spin mx-auto"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Cargando..."})]})}):e?(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsx)(B,{onComplete:()=>{s.push("/dashboard")}})}):null}}},e=>{var a=a=>e(e.s=a);e.O(0,[9135,7210,5769,9863,3856,9550,5679,8722,4434,6766,4214,6902,9892,988,2673,9828,8441,1684,7358],()=>a(64948)),_N_E=e.O()}]);