(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6213],{9425:(e,a,t)=>{Promise.resolve().then(t.bind(t,75415))},22346:(e,a,t)=>{"use strict";t.d(a,{w:()=>o});var r=t(95155),s=t(12115),n=t(87489),i=t(59434);let o=s.forwardRef((e,a)=>{let{className:t,orientation:s="horizontal",decorative:o=!0,...l}=e;return(0,r.jsx)(n.b,{ref:a,decorative:o,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...l})});o.displayName=n.b.displayName},26126:(e,a,t)=>{"use strict";t.d(a,{E:()=>o});var r=t(95155);t(12115);var s=t(74466),n=t(59434);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:t,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),a),...s})}},30285:(e,a,t)=>{"use strict";t.d(a,{$:()=>d,r:()=>l});var r=t(95155),s=t(12115),n=t(66634),i=t(74466),o=t(59434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,a)=>{let{className:t,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:t})),ref:a,...c})});d.displayName="Button"},30462:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(40157).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},31573:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(40157).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},40968:(e,a,t)=>{"use strict";t.d(a,{b:()=>o});var r=t(12115),s=t(63540),n=t(95155),i=r.forwardRef((e,a)=>(0,n.jsx)(s.sG.label,{...e,ref:a,onMouseDown:a=>{var t;a.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var o=i},45731:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(40157).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},54165:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>m,Es:()=>f,L3:()=>x,c7:()=>p,lG:()=>l,rr:()=>h,zM:()=>d});var r=t(95155),s=t(12115),n=t(45821),i=t(25318),o=t(59434);let l=n.bL,d=n.l9,c=n.ZL;n.bm;let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.hJ,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});u.displayName=n.hJ.displayName;let m=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.UC,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let p=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};p.displayName="DialogHeader";let f=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};f.displayName="DialogFooter";let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.hE,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});x.displayName=n.hE.displayName;let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.VY,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",t),...s})});h.displayName=n.VY.displayName},54913:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(40157).A)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},56104:(e,a,t)=>{"use strict";let r;t.d(a,{db:()=>r,j2:()=>u});var s=t(23915),n=t(24903),i=t(35317),o=t(77505),l=t(99895);let d={projectId:"squadgo-app",appId:"1:442519077443:web:3d4e9e034e222838230af6",storageBucket:"squadgo-app.firebasestorage.app",apiKey:"AIzaSyDfY3FrK9baCrVhqhBpD2Zd7v2_oARFuX8",authDomain:"squadgo-app.firebaseapp.com",measurementId:"",messagingSenderId:"442519077443"},c=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(d);console.log("\uD83D\uDD27 Firebase - Aplicaci\xf3n inicializada:",{projectId:d.projectId});let u=(0,n.getAuth)(c);Promise.resolve().then(t.bind(t,24903)).then(e=>{let{setPersistence:a,browserLocalPersistence:t,onAuthStateChanged:r}=e;a(u,t).then(()=>{console.log("✅ Firebase Auth - Persistencia configurada correctamente"),r(u,e=>{if(e){console.log("\uD83D\uDD04 Firebase Auth - Sesi\xf3n restaurada:",e.uid);let a={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,lastLogin:Date.now()};localStorage.setItem("squadgo_user_backup",JSON.stringify(a))}})}).catch(e=>{console.error("❌ Error configurando persistencia:",e),localStorage.getItem("squadgo_user_backup")&&console.log("\uD83D\uDD04 Intentando recuperar sesi\xf3n desde backup...")})}),console.log("\uD83D\uDD27 Firebase Auth - Inicializado:",{authDomain:d.authDomain});try{r=(0,i._A)(c,{ignoreUndefinedProperties:!0,experimentalAutoDetectLongPolling:!1,cacheSizeBytes:4e7,experimentalForceLongPolling:!1}),console.log("\uD83D\uDD27 Firestore - Inicializado con cache local y configuraci\xf3n optimizada")}catch(e){console.warn("⚠️ Firestore ya inicializado, usando instancia existente"),r=(0,i.aU)(c)}window.addEventListener("online",()=>{(0,i.Os)(r).catch(()=>{})}),window.addEventListener("offline",()=>{(0,i.LA)(r).catch(()=>{})}),(0,o.c7)(c);(0,l.TT)().then(e=>{e&&(0,l.dG)(c)})},59409:(e,a,t)=>{"use strict";t.d(a,{bq:()=>p,eb:()=>g,gC:()=>h,l6:()=>c,s3:()=>u,yv:()=>m});var r=t(95155),s=t(12115),n=t(43433),i=t(79556),o=t(77381),l=t(10518),d=t(59434);let c=n.bL,u=n.YJ,m=n.WT,p=s.forwardRef((e,a)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(n.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...o,children:[s,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=n.l9.displayName;let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});f.displayName=n.PP.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=n.wn.displayName;let h=s.forwardRef((e,a)=>{let{className:t,children:s,position:i="popper",...o}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...o,children:[(0,r.jsx)(f,{}),(0,r.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})})});h.displayName=n.UC.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=n.JU.displayName;let g=s.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,r.jsxs)(n.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:s})]})});g.displayName=n.q7.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=n.wv.displayName},62523:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var r=t(95155),s=t(12115),n=t(59434);let i=s.forwardRef((e,a)=>{let{className:t,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});i.displayName="Input"},66695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>u});var r=t(95155),s=t(12115),n=t(59434);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},67491:(e,a,t)=>{"use strict";t.d(a,{A:()=>d,AuthProvider:()=>l});var r=t(95155),s=t(12115),n=t(24903),i=t(56104);let o=(0,s.createContext)({user:null,loading:!0}),l=e=>{let{children:a}=e,[t,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{console.log("\uD83D\uDD27 AuthProvider - Configurando listener de autenticaci\xf3n"),(()=>{{let e=localStorage.getItem("squadgo_user"),a=localStorage.getItem("squadgo_user_backup");if(e||a)try{let t=JSON.parse(e||a||"{}");console.log("\uD83D\uDD04 AuthProvider - Intentando recuperar sesi\xf3n desde localStorage:",t.uid)}catch(e){console.error("❌ Error recuperando usuario desde localStorage:",e),localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}}})();let e=(0,n.onAuthStateChanged)(i.j2,async e=>{if(console.log("\uD83D\uDD04 AuthProvider - Estado de autenticaci\xf3n cambi\xf3:",{uid:null==e?void 0:e.uid,email:null==e?void 0:e.email,emailVerified:null==e?void 0:e.emailVerified}),e)try{console.log("✅ AuthProvider - Usuario autenticado"),l(e);{let a={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",emailVerified:e.emailVerified,lastUpdate:Date.now(),sessionId:Math.random().toString(36).substring(2,11)};localStorage.setItem("squadgo_user",JSON.stringify(a)),localStorage.setItem("squadgo_user_backup",JSON.stringify(a));let t=new CustomEvent("userAuthenticated",{detail:{user:e}});window.dispatchEvent(t)}}catch(e){console.error("❌ AuthProvider - Error procesando usuario:",e),l(null),localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}else{console.log("\uD83D\uDEAB AuthProvider - Usuario no autenticado"),l(null);{let e=localStorage.getItem("squadgo_user_backup");if(e)try{let a=JSON.parse(e);Date.now()-(a.lastUpdate||0)>864e5?(localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup"),console.log("\uD83E\uDDF9 Limpiando datos de sesi\xf3n expirados")):console.log("\uD83D\uDD04 Manteniendo backup de sesi\xf3n reciente")}catch(e){localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}else localStorage.removeItem("squadgo_user")}}c(!1)});return()=>{console.log("\uD83E\uDDF9 AuthProvider - Limpiando listener de autenticaci\xf3n"),e()}},[]),(0,r.jsx)(o.Provider,{value:{user:t,loading:d},children:a})},d=()=>(0,s.useContext)(o)},75415:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>O});var r,s=t(95155),n=t(12115),i=t(30285),o=t(66695),l=t(26126),d=t(87481),c=t(67491),u=t(54913),m=t(30462),p=t(10518),f=t(89829);let x=(0,t(40157).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var h=t(93473),g=t(54165),v=t(62523),y=t(85057),b=t(59409),j=t(22346),N=t(45731),w=t(31573),S="https://js.stripe.com/v3",A=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,C=function(){for(var e=document.querySelectorAll('script[src^="'.concat(S,'"]')),a=0;a<e.length;a++){var t=e[a];if(A.test(t.src))return t}return null},I=function(e){var a=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(S).concat(a);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(t),t},P=function(e,a){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:a})},E=null,_=null,k=null,D=function(e,a,t){if(null===e)return null;var r=e.apply(void 0,a);return P(r,t),r},T=!1,L=function(){return r?r:r=(null!==E?E:(E=new Promise(function(e,a){if("undefined"==typeof window||"undefined"==typeof document)return void e(null);if(window.Stripe,window.Stripe)return void e(window.Stripe);try{var t,r=C();r?r&&null!==k&&null!==_&&(r.removeEventListener("load",k),r.removeEventListener("error",_),null==(t=r.parentNode)||t.removeChild(r),r=I(null)):r=I(null),k=function(){window.Stripe?e(window.Stripe):a(Error("Stripe.js not available"))},_=function(){a(Error("Failed to load Stripe.js"))},r.addEventListener("load",k),r.addEventListener("error",_)}catch(e){a(e);return}})).catch(function(e){return E=null,Promise.reject(e)})).catch(function(e){return r=null,Promise.reject(e)})};Promise.resolve().then(function(){return L()}).catch(function(e){T||console.warn(e)});let z=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];T=!0;var r=Date.now();return L().then(function(e){return D(e,a,r)})}("pk_test_51234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef");function R(e){let{open:a,onOpenChange:t,plan:r,onSuccess:o}=e,{user:l}=(0,c.A)(),{toast:u}=(0,d.dj)(),[m,p]=(0,n.useState)("card"),[f,h]=(0,n.useState)(!1),[S,A]=(0,n.useState)({number:"",expiry:"",cvc:"",name:""}),[C,I]=(0,n.useState)(""),P=async()=>{if(!l)return void u({variant:"destructive",title:"Error",description:"Debes estar autenticado para realizar un pago."});if("card"===m&&(!S.number||!S.expiry||!S.cvc||!S.name))return void u({variant:"destructive",title:"Campos Incompletos",description:"Por favor, completa todos los campos de la tarjeta."});if("paypal"===m&&!C)return void u({variant:"destructive",title:"Campo Incompleto",description:"Por favor, ingresa tu email de PayPal."});h(!0);try{let e=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*r.price,currency:"usd",planId:r.id,userId:l.uid})}),{clientSecret:a,paymentIntentId:t}=await e.json();if(!a)throw Error("Failed to create payment intent");if(!await z)throw Error("Stripe failed to load");"card"===m&&(console.log("Processing payment with card data:",S),await new Promise(e=>setTimeout(e,1e3)));let s=await fetch("/api/confirm-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentIntentId:t,userId:l.uid,planId:r.id,paymentMethodData:{userId:l.uid,type:m,isDefault:!0,createdAt:new Date().toISOString(),..."card"===m?{last4:S.number.slice(-4),brand:"visa",stripePaymentMethodId:"pm_".concat(Date.now())}:{email:C,paypalPaymentMethodId:"pp_".concat(Date.now())}}})});if(!(await s.json()).success)throw Error("Failed to confirm payment");u({title:"\xa1Pago exitoso!",description:"Te has suscrito al ".concat(r.name,". \xa1Bienvenido como creador!")}),o()}catch(e){console.error("Error processing payment:",e),u({variant:"destructive",title:"Error en el pago",description:e instanceof Error?e.message:"Hubo un problema procesando tu pago. Int\xe9ntalo de nuevo."})}finally{h(!1)}},E=e=>{let a=e.replace(/\s+/g,"").replace(/[^0-9]/gi,""),t=a.match(/\d{4,16}/g),r=t&&t[0]||"",s=[];for(let e=0,a=r.length;e<a;e+=4)s.push(r.substring(e,e+4));return s.length?s.join(" "):a},_=e=>{let a=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return a.length>=2?a.substring(0,2)+"/"+a.substring(2,4):a};return(0,s.jsx)(g.lG,{open:a,onOpenChange:t,children:(0,s.jsxs)(g.Cf,{className:"sm:max-w-md",children:[(0,s.jsxs)(g.c7,{children:[(0,s.jsx)(g.L3,{children:"Completar Suscripci\xf3n"}),(0,s.jsxs)(g.rr,{children:["Suscr\xedbete al ",r.name," por $",r.price,"/mes"]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:r.name}),(0,s.jsxs)("span",{className:"font-bold",children:["$",r.price,"/mes"]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:r.description})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(y.J,{children:"M\xe9todo de Pago"}),(0,s.jsxs)(b.l6,{value:m,onValueChange:e=>p(e),children:[(0,s.jsx)(b.bq,{children:(0,s.jsx)(b.yv,{})}),(0,s.jsxs)(b.gC,{children:[(0,s.jsx)(b.eb,{value:"card",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x,{className:"w-4 h-4 mr-2"}),"Tarjeta de Cr\xe9dito/D\xe9bito"]})}),(0,s.jsx)(b.eb,{value:"paypal",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-4 h-4 mr-2 bg-blue-600 rounded-sm"}),"PayPal"]})})]})]})]}),"card"===m?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.J,{htmlFor:"cardNumber",children:"N\xfamero de Tarjeta"}),(0,s.jsx)(v.p,{id:"cardNumber",placeholder:"1234 5678 9012 3456",value:S.number,onChange:e=>A(a=>({...a,number:E(e.target.value)})),maxLength:19})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.J,{htmlFor:"expiry",children:"Vencimiento"}),(0,s.jsx)(v.p,{id:"expiry",placeholder:"MM/AA",value:S.expiry,onChange:e=>A(a=>({...a,expiry:_(e.target.value)})),maxLength:5})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.J,{htmlFor:"cvc",children:"CVC"}),(0,s.jsx)(v.p,{id:"cvc",placeholder:"123",value:S.cvc,onChange:e=>A(a=>({...a,cvc:e.target.value.replace(/\D/g,"")})),maxLength:4})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.J,{htmlFor:"cardName",children:"Nombre en la Tarjeta"}),(0,s.jsx)(v.p,{id:"cardName",placeholder:"Juan P\xe9rez",value:S.name,onChange:e=>A(a=>({...a,name:e.target.value}))})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.J,{htmlFor:"paypalEmail",children:"Email de PayPal"}),(0,s.jsx)(v.p,{id:"paypalEmail",type:"email",placeholder:"tu@email.com",value:C,onChange:e=>I(e.target.value)})]}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Ser\xe1s redirigido a PayPal para completar el pago de forma segura."})]}),(0,s.jsx)(j.w,{}),(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-muted-foreground",children:[(0,s.jsx)(N.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Pago seguro y encriptado"}),(0,s.jsx)(w.A,{className:"w-4 h-4"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(i.$,{variant:"outline",className:"flex-1",onClick:()=>t(!1),disabled:f,children:"Cancelar"}),(0,s.jsx)(i.$,{className:"flex-1",onClick:P,disabled:f||"card"===m&&(!S.number||!S.expiry||!S.cvc||!S.name)||"paypal"===m&&!C,children:f?"Procesando...":"Pagar $".concat(r.price)})]})]})]})})}function O(){let{user:e}=(0,c.A)(),{toast:a}=(0,d.dj)(),[t,r]=(0,n.useState)(null),[g,v]=(0,n.useState)([]),[y,b]=(0,n.useState)(!0),[j,N]=(0,n.useState)(null),[w,S]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if(e)try{let e=h.Ap;r(null),v(e)}catch(e){console.error("Error loading subscription data:",e),v(h.Ap)}finally{b(!1)}})()},[e]);let A=t=>{if(!e)return void a({title:"Error",description:"Debes iniciar sesi\xf3n para suscribirte",variant:"destructive"});N(t),S(!0)};return y?(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)("div",{className:"text-center",children:"Cargando..."})}):(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Convi\xe9rtete en Creador de Contenido"}),(0,s.jsx)("p",{className:"text-xl text-muted-foreground mb-6",children:"\xdanete a la \xe9lite de creadores: crea torneos, ofrece servicios, construye tu comunidad y monetiza tu pasi\xf3n por PUBG Mobile"}),t&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)(l.E,{variant:"default",className:"text-lg px-4 py-2",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Suscripci\xf3n Activa"]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["V\xe1lida hasta: ",new Date(t.endDate).toLocaleDateString()]})]})]}),(0,s.jsx)("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:g.map((e,a)=>{let r=1===a,n=(null==t?void 0:t.planId)===e.id;return(0,s.jsxs)(o.Zp,{className:"relative ".concat(r?"border-primary shadow-lg scale-105":""),children:[r&&(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:(0,s.jsxs)(l.E,{className:"bg-primary text-primary-foreground px-4 py-1",children:[(0,s.jsx)(m.A,{className:"w-3 h-3 mr-1"}),"M\xe1s Popular"]})}),(0,s.jsxs)(o.aR,{className:"text-center",children:[(0,s.jsx)(o.ZB,{className:"text-2xl",children:e.name}),(0,s.jsx)(o.BT,{children:e.description}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("span",{className:"text-4xl font-bold",children:["$",e.price]}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"/mes"})]})]}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("ul",{className:"space-y-3",children:e.features.map((e,a)=>(0,s.jsxs)("li",{className:"flex items-center",children:[(0,s.jsx)(p.A,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),(0,s.jsx)("span",{children:e})]},a))})}),(0,s.jsx)(o.wL,{children:n?(0,s.jsxs)(i.$,{disabled:!0,className:"w-full",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Plan Actual"]}):t?(0,s.jsxs)(i.$,{variant:"outline",className:"w-full",onClick:()=>A(e),children:[(0,s.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Cambiar Plan"]}):(0,s.jsxs)(i.$,{className:"w-full ".concat(r?"bg-primary hover:bg-primary/90":""),onClick:()=>A(e),children:[(0,s.jsx)(x,{className:"w-4 h-4 mr-2"}),"Suscribirse"]})})]},e.id)})}),(0,s.jsxs)("div",{className:"mt-12 text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Beneficios Exclusivos de Creador"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"bg-primary/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(f.A,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Torneos Ilimitados"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Crea y gestiona torneos sin l\xedmites con herramientas profesionales"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"bg-primary/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(u.A,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Servicios Premium"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ofrece coaching, an\xe1lisis y servicios personalizados a la comunidad"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"bg-primary/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(m.A,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Monetizaci\xf3n"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Genera ingresos con tus servicios y contenido especializado"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"bg-primary/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(x,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Herramientas Pro"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Analytics avanzados, streaming integrado y soporte prioritario 24/7"})]})]})]}),j&&(0,s.jsx)(R,{open:w,onOpenChange:S,plan:j,onSuccess:()=>{S(!1),a({title:"\xa1Suscripci\xf3n exitosa!",description:"Ahora puedes crear torneos ilimitados"}),e&&r(null)}})]})}},85057:(e,a,t)=>{"use strict";t.d(a,{J:()=>d});var r=t(95155),s=t(12115),n=t(40968),i=t(74466),o=t(59434);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.b,{ref:a,className:(0,o.cn)(l(),t),...s})});d.displayName=n.b.displayName},87481:(e,a,t)=>{"use strict";t.d(a,{dj:()=>m,oR:()=>u});var r=t(12115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},o=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...a}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,a]=r.useState(d);return r.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},87489:(e,a,t)=>{"use strict";t.d(a,{b:()=>d});var r=t(12115),s=t(63540),n=t(95155),i="horizontal",o=["horizontal","vertical"],l=r.forwardRef((e,a)=>{var t;let{decorative:r,orientation:l=i,...d}=e,c=(t=l,o.includes(t))?l:i;return(0,n.jsx)(s.sG.div,{"data-orientation":c,...r?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:a})});l.displayName="Separator";var d=l},89829:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(40157).A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[9135,7210,5769,9863,3856,9550,5679,8722,4434,2458,8441,1684,7358],()=>a(9425)),_N_E=e.O()}]);