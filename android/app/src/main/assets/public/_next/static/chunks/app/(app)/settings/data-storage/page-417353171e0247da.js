(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5850],{8376:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(40157).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},15300:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(40157).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},22346:(e,a,t)=>{"use strict";t.d(a,{w:()=>l});var s=t(95155),r=t(12115),o=t(87489),i=t(59434);let l=r.forwardRef((e,a)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...n}=e;return(0,s.jsx)(o.b,{ref:a,decorative:l,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...n})});l.displayName=o.b.displayName},24944:(e,a,t)=>{"use strict";t.d(a,{k:()=>l});var s=t(95155),r=t(12115),o=t(55863),i=t(59434);let l=r.forwardRef((e,a)=>{let{className:t,value:r,...l}=e;return(0,s.jsx)(o.bL,{ref:a,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,s.jsx)(o.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=o.bL.displayName},26126:(e,a,t)=>{"use strict";t.d(a,{E:()=>l});var s=t(95155);t(12115);var r=t(74466),o=t(59434);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{className:(0,o.cn)(i({variant:t}),a),...r})}},30285:(e,a,t)=>{"use strict";t.d(a,{$:()=>d,r:()=>n});var s=t(95155),r=t(12115),o=t(66634),i=t(74466),l=t(59434);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,a)=>{let{className:t,variant:r,size:i,asChild:d=!1,...c}=e,u=d?o.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(n({variant:r,size:i,className:t})),ref:a,...c})});d.displayName="Button"},37648:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(40157).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},55863:(e,a,t)=>{"use strict";t.d(a,{C1:()=>j,bL:()=>b});var s=t(12115),r=t(46081),o=t(63540),i=t(95155),l="Progress",[n,d]=(0,r.A)(l),[c,u]=n(l),m=s.forwardRef((e,a)=>{var t,s,r,l;let{__scopeProgress:n,value:d=null,max:u,getValueLabel:m=h,...p}=e;(u||0===u)&&!v(u)&&console.error((t="".concat(u),s="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(s,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let g=v(u)?u:100;null===d||y(d,g)||console.error((r="".concat(d),l="Progress","Invalid prop `value` of value `".concat(r,"` supplied to `").concat(l,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let b=y(d,g)?d:null,j=f(b)?m(b,g):void 0;return(0,i.jsx)(c,{scope:n,value:b,max:g,children:(0,i.jsx)(o.sG.div,{"aria-valuemax":g,"aria-valuemin":0,"aria-valuenow":f(b)?b:void 0,"aria-valuetext":j,role:"progressbar","data-state":x(b,g),"data-value":null!=b?b:void 0,"data-max":g,...p,ref:a})})});m.displayName=l;var p="ProgressIndicator",g=s.forwardRef((e,a)=>{var t;let{__scopeProgress:s,...r}=e,l=u(p,s);return(0,i.jsx)(o.sG.div,{"data-state":x(l.value,l.max),"data-value":null!=(t=l.value)?t:void 0,"data-max":l.max,...r,ref:a})});function h(e,a){return"".concat(Math.round(e/a*100),"%")}function x(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function f(e){return"number"==typeof e}function v(e){return f(e)&&!isNaN(e)&&e>0}function y(e,a){return f(e)&&!isNaN(e)&&e<=a&&e>=0}g.displayName=p;var b=m,j=g},56104:(e,a,t)=>{"use strict";let s;t.d(a,{db:()=>s,j2:()=>u});var r=t(23915),o=t(24903),i=t(35317),l=t(77505),n=t(99895);let d={projectId:"squadgo-app",appId:"1:442519077443:web:3d4e9e034e222838230af6",storageBucket:"squadgo-app.firebasestorage.app",apiKey:"AIzaSyDfY3FrK9baCrVhqhBpD2Zd7v2_oARFuX8",authDomain:"squadgo-app.firebaseapp.com",measurementId:"",messagingSenderId:"442519077443"},c=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)(d);console.log("\uD83D\uDD27 Firebase - Aplicaci\xf3n inicializada:",{projectId:d.projectId});let u=(0,o.getAuth)(c);Promise.resolve().then(t.bind(t,24903)).then(e=>{let{setPersistence:a,browserLocalPersistence:t,onAuthStateChanged:s}=e;a(u,t).then(()=>{console.log("✅ Firebase Auth - Persistencia configurada correctamente"),s(u,e=>{if(e){console.log("\uD83D\uDD04 Firebase Auth - Sesi\xf3n restaurada:",e.uid);let a={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,lastLogin:Date.now()};localStorage.setItem("squadgo_user_backup",JSON.stringify(a))}})}).catch(e=>{console.error("❌ Error configurando persistencia:",e),localStorage.getItem("squadgo_user_backup")&&console.log("\uD83D\uDD04 Intentando recuperar sesi\xf3n desde backup...")})}),console.log("\uD83D\uDD27 Firebase Auth - Inicializado:",{authDomain:d.authDomain});try{s=(0,i._A)(c,{ignoreUndefinedProperties:!0,experimentalAutoDetectLongPolling:!1,cacheSizeBytes:4e7,experimentalForceLongPolling:!1}),console.log("\uD83D\uDD27 Firestore - Inicializado con cache local y configuraci\xf3n optimizada")}catch(e){console.warn("⚠️ Firestore ya inicializado, usando instancia existente"),s=(0,i.aU)(c)}window.addEventListener("online",()=>{(0,i.Os)(s).catch(()=>{})}),window.addEventListener("offline",()=>{(0,i.LA)(s).catch(()=>{})}),(0,l.c7)(c);(0,n.TT)().then(e=>{e&&(0,n.dG)(c)})},59434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>o});var s=t(52596),r=t(39688);function o(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}},66695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>n,Zp:()=>i,aR:()=>l,wL:()=>u});var s=t(95155),r=t(12115),o=t(59434);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h3",{ref:a,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});n.displayName="CardTitle";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("p",{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,o.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,o.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},67491:(e,a,t)=>{"use strict";t.d(a,{A:()=>d,AuthProvider:()=>n});var s=t(95155),r=t(12115),o=t(24903),i=t(56104);let l=(0,r.createContext)({user:null,loading:!0}),n=e=>{let{children:a}=e,[t,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{console.log("\uD83D\uDD27 AuthProvider - Configurando listener de autenticaci\xf3n"),(()=>{{let e=localStorage.getItem("squadgo_user"),a=localStorage.getItem("squadgo_user_backup");if(e||a)try{let t=JSON.parse(e||a||"{}");console.log("\uD83D\uDD04 AuthProvider - Intentando recuperar sesi\xf3n desde localStorage:",t.uid)}catch(e){console.error("❌ Error recuperando usuario desde localStorage:",e),localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}}})();let e=(0,o.onAuthStateChanged)(i.j2,async e=>{if(console.log("\uD83D\uDD04 AuthProvider - Estado de autenticaci\xf3n cambi\xf3:",{uid:null==e?void 0:e.uid,email:null==e?void 0:e.email,emailVerified:null==e?void 0:e.emailVerified}),e)try{console.log("✅ AuthProvider - Usuario autenticado"),n(e);{let a={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",emailVerified:e.emailVerified,lastUpdate:Date.now(),sessionId:Math.random().toString(36).substring(2,11)};localStorage.setItem("squadgo_user",JSON.stringify(a)),localStorage.setItem("squadgo_user_backup",JSON.stringify(a));let t=new CustomEvent("userAuthenticated",{detail:{user:e}});window.dispatchEvent(t)}}catch(e){console.error("❌ AuthProvider - Error procesando usuario:",e),n(null),localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}else{console.log("\uD83D\uDEAB AuthProvider - Usuario no autenticado"),n(null);{let e=localStorage.getItem("squadgo_user_backup");if(e)try{let a=JSON.parse(e);Date.now()-(a.lastUpdate||0)>864e5?(localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup"),console.log("\uD83E\uDDF9 Limpiando datos de sesi\xf3n expirados")):console.log("\uD83D\uDD04 Manteniendo backup de sesi\xf3n reciente")}catch(e){localStorage.removeItem("squadgo_user"),localStorage.removeItem("squadgo_user_backup")}else localStorage.removeItem("squadgo_user")}}c(!1)});return()=>{console.log("\uD83E\uDDF9 AuthProvider - Limpiando listener de autenticaci\xf3n"),e()}},[]),(0,s.jsx)(l.Provider,{value:{user:t,loading:d},children:a})},d=()=>(0,r.useContext)(l)},67554:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(40157).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},68718:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(40157).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},80333:(e,a,t)=>{"use strict";t.d(a,{d:()=>l});var s=t(95155),r=t(12115),o=t(4884),i=t(59434);let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(o.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:a,children:(0,s.jsx)(o.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=o.bL.displayName},83151:(e,a,t)=>{Promise.resolve().then(t.bind(t,92561))},85057:(e,a,t)=>{"use strict";t.d(a,{J:()=>d});var s=t(95155),r=t(12115),o=t(40968),i=t(74466),l=t(59434);let n=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(o.b,{ref:a,className:(0,l.cn)(n(),t),...r})});d.displayName=o.b.displayName},87481:(e,a,t)=>{"use strict";t.d(a,{dj:()=>m,oR:()=>u});var s=t(12115);let r=0,o=new Map,i=e=>{if(o.has(e))return;let a=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,a)},l=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},n=[],d={toasts:[]};function c(e){d=l(d,e),n.forEach(e=>{e(d)})}function u(e){let{...a}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,a]=s.useState(d);return s.useEffect(()=>(n.push(a),()=>{let e=n.indexOf(a);e>-1&&n.splice(e,1)}),[]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},87489:(e,a,t)=>{"use strict";t.d(a,{b:()=>d});var s=t(12115),r=t(63540),o=t(95155),i="horizontal",l=["horizontal","vertical"],n=s.forwardRef((e,a)=>{var t;let{decorative:s,orientation:n=i,...d}=e,c=(t=n,l.includes(t))?n:i;return(0,o.jsx)(r.sG.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:a})});n.displayName="Separator";var d=n},92561:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var s=t(95155),r=t(12115),o=t(30285),i=t(66695),l=t(85057),n=t(80333),d=t(24944),c=t(26126),u=t(22346),m=t(87481),p=t(40157);let g=(0,p.A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var h=t(45727),x=t(67554),f=t(15300),v=t(37648);let y=(0,p.A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var b=t(77223),j=t(8376),N=t(68718),w=t(31949),S=t(67491);function k(){let{user:e}=(0,S.A)(),[a,t]=(0,r.useState)({totalUsed:0,totalLimit:100,breakdown:{profiles:0,matches:0,messages:0,media:0,cache:0,backups:0},lastCleanup:new Date().toISOString(),autoCleanup:!0,retentionDays:30}),[p,k]=(0,r.useState)({localStorage:0,sessionStorage:0,indexedDB:0,serviceWorker:0}),[A,_]=(0,r.useState)(!1),[I,M]=(0,r.useState)(!1),D=async()=>{try{let e=0;for(let a in localStorage)localStorage.hasOwnProperty(a)&&(e+=localStorage[a].length+a.length);let a=0;for(let e in sessionStorage)sessionStorage.hasOwnProperty(e)&&(a+=sessionStorage[e].length+e.length);let s=0;"storage"in navigator&&"estimate"in navigator.storage&&(s=(await navigator.storage.estimate()).usage||0),k({localStorage:Math.round(e/1024),sessionStorage:Math.round(a/1024),indexedDB:Math.round(s/1024),serviceWorker:0});let r=Math.round((e+a+s)/1048576);t(e=>({...e,totalUsed:r,breakdown:{profiles:Math.round(.3*r),matches:Math.round(.25*r),messages:Math.round(.2*r),media:Math.round(.15*r),cache:Math.round(.08*r),backups:Math.round(.02*r)}}))}catch(e){console.error("Error calculating storage:",e)}},E=async e=>{M(!0);try{switch(e){case"cache":if("caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}break;case"localStorage":Object.keys(localStorage).forEach(e=>{(e.startsWith("squadgo_")||e.startsWith("profile_")||e.startsWith("pending_"))&&localStorage.removeItem(e)});break;case"sessionStorage":sessionStorage.clear();break;case"backups":Object.keys(localStorage).filter(e=>e.includes("backup")).forEach(e=>localStorage.removeItem(e));break;case"messages":Object.keys(localStorage).filter(e=>e.includes("message")).forEach(e=>localStorage.removeItem(e))}await D(),(0,m.oR)({title:"Datos limpiados",description:"Se han eliminado los datos de ".concat(e," correctamente")})}catch(e){console.error("Error clearing data:",e),(0,m.oR)({title:"Error",description:"No se pudieron limpiar los datos",variant:"destructive"})}finally{M(!1)}},C=async()=>{M(!0);try{if(Object.keys(localStorage).forEach(e=>{(e.startsWith("squadgo_")||e.startsWith("profile_")||e.startsWith("pending_"))&&localStorage.removeItem(e)}),sessionStorage.clear(),"caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}await D(),t(e=>({...e,lastCleanup:new Date().toISOString()})),(0,m.oR)({title:"Limpieza completa",description:"Todos los datos locales han sido eliminados"})}catch(e){console.error("Error clearing all data:",e),(0,m.oR)({title:"Error",description:"No se pudieron limpiar todos los datos",variant:"destructive"})}finally{M(!1)}},L=async()=>{_(!0);try{let a={profile:localStorage.getItem("profile_".concat(null==e?void 0:e.uid)),settings:localStorage.getItem("settings_".concat(null==e?void 0:e.uid)),matches:localStorage.getItem("matches_".concat(null==e?void 0:e.uid)),exportDate:new Date().toISOString()},t=JSON.stringify(a,null,2),s=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(s),o=document.createElement("a");o.href=r,o.download="squadgo-data-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),(0,m.oR)({title:"Datos exportados",description:"Tus datos han sido descargados correctamente"})}catch(e){console.error("Error exporting data:",e),(0,m.oR)({title:"Error",description:"No se pudieron exportar los datos",variant:"destructive"})}finally{_(!1)}},R=(s,r)=>{t(e=>({...e,[s]:r})),localStorage.setItem("storage_settings_".concat(null==e?void 0:e.uid),JSON.stringify({...a,[s]:r})),(0,m.oR)({title:"Configuraci\xf3n actualizada",description:"Los cambios han sido guardados"})};(0,r.useEffect)(()=>{D();let a=localStorage.getItem("storage_settings_".concat(null==e?void 0:e.uid));if(a)try{let e=JSON.parse(a);t(a=>({...a,...e}))}catch(e){console.error("Error loading storage settings:",e)}},[e]);let O=a.totalUsed/a.totalLimit*100,T=p.localStorage+p.sessionStorage+p.indexedDB;return(0,s.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g,{className:"h-8 w-8 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Datos y Almacenamiento"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Gestiona el uso de almacenamiento y limpia datos innecesarios"})]})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-5 w-5"}),"Uso de Almacenamiento"]}),(0,s.jsxs)(i.BT,{children:[a.totalUsed," MB de ",a.totalLimit," MB utilizados"]})]}),(0,s.jsxs)(i.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Uso total"}),(0,s.jsxs)("span",{children:[Math.round(O),"%"]})]}),(0,s.jsx)(d.k,{value:O,className:"h-2"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-sm",children:["Perfiles: ",a.breakdown.profiles," MB"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-sm",children:["Matches: ",a.breakdown.matches," MB"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-sm",children:["Mensajes: ",a.breakdown.messages," MB"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-sm",children:["Media: ",a.breakdown.media," MB"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-sm",children:["Cache: ",a.breakdown.cache," MB"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-sm",children:["Backups: ",a.breakdown.backups," MB"]})]})]})]})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"h-5 w-5"}),"Cache del Navegador"]}),(0,s.jsx)(i.BT,{children:"Datos temporales almacenados localmente"})]}),(0,s.jsx)(i.Wu,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,s.jsx)(f.A,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:p.localStorage}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Local Storage (KB)"})]}),(0,s.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,s.jsx)(v.A,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:p.sessionStorage}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Session Storage (KB)"})]}),(0,s.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,s.jsx)(h.A,{className:"h-8 w-8 mx-auto mb-2 text-purple-500"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:p.indexedDB}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"IndexedDB (KB)"})]}),(0,s.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,s.jsx)(y,{className:"h-8 w-8 mx-auto mb-2 text-orange-500"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:T}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Cache (KB)"})]})]})})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"h-5 w-5"}),"Configuraci\xf3n de Limpieza"]})}),(0,s.jsxs)(i.Wu,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(l.J,{children:"Limpieza autom\xe1tica"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Eliminar autom\xe1ticamente datos antiguos"})]}),(0,s.jsx)(n.d,{checked:a.autoCleanup,onCheckedChange:e=>R("autoCleanup",e)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.J,{children:"Retenci\xf3n de datos (d\xedas)"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("input",{type:"range",min:"7",max:"90",value:a.retentionDays,onChange:e=>R("retentionDays",parseInt(e.target.value)),className:"flex-1"}),(0,s.jsxs)(c.E,{variant:"outline",children:[a.retentionDays," d\xedas"]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Los datos m\xe1s antiguos que este per\xedodo ser\xe1n eliminados autom\xe1ticamente"})]}),(0,s.jsx)(u.w,{}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"font-medium",children:"\xdaltima limpieza"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)("span",{className:"text-sm",children:new Date(a.lastCleanup).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"h-5 w-5"}),"Acciones de Limpieza"]}),(0,s.jsx)(i.BT,{children:"Elimina datos espec\xedficos para liberar espacio"})]}),(0,s.jsxs)(i.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)(o.$,{variant:"outline",onClick:()=>E("cache"),disabled:I,className:"justify-start",children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Limpiar Cache"]}),(0,s.jsxs)(o.$,{variant:"outline",onClick:()=>E("localStorage"),disabled:I,className:"justify-start",children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Limpiar Local Storage"]}),(0,s.jsxs)(o.$,{variant:"outline",onClick:()=>E("backups"),disabled:I,className:"justify-start",children:[(0,s.jsx)(y,{className:"mr-2 h-4 w-4"}),"Limpiar Backups"]}),(0,s.jsxs)(o.$,{variant:"outline",onClick:()=>E("messages"),disabled:I,className:"justify-start",children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Limpiar Mensajes Antiguos"]})]}),(0,s.jsx)(u.w,{}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)(o.$,{onClick:L,disabled:A,variant:"outline",className:"flex-1",children:[(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4"}),A?"Exportando...":"Exportar Datos"]}),(0,s.jsxs)(o.$,{onClick:C,disabled:I,variant:"destructive",className:"flex-1",children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4"}),I?"Limpiando...":"Limpiar Todo"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,s.jsx)(w.A,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,s.jsx)("strong",{children:"Advertencia:"})," La limpieza completa eliminar\xe1 todos los datos locales. Esta acci\xf3n no se puede deshacer. Se recomienda exportar los datos antes de continuar."]})]})]})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[9135,7210,5769,3856,1947,8441,1684,7358],()=>a(83151)),_N_E=e.O()}]);