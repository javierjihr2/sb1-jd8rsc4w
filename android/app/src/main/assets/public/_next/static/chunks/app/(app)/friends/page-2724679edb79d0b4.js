(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3997],{13896:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(40157).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},17313:(e,s,r)=>{"use strict";r.d(s,{Xi:()=>l,av:()=>o,j7:()=>c,tU:()=>d});var a=r(95155),t=r(12115),n=r(60704),i=r(59434);let d=n.bL,c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t})});c.displayName=n.B8.displayName;let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t})});l.displayName=n.l9.displayName;let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});o.displayName=n.UC.displayName},21903:(e,s,r)=>{Promise.resolve().then(r.bind(r,70273))},54165:(e,s,r)=>{"use strict";r.d(s,{Cf:()=>m,Es:()=>x,L3:()=>h,c7:()=>f,lG:()=>c,rr:()=>p,zM:()=>l});var a=r(95155),t=r(12115),n=r(45821),i=r(25318),d=r(59434);let c=n.bL,l=n.l9,o=n.ZL;n.bm;let u=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n.hJ,{ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t})});u.displayName=n.hJ.displayName;let m=t.forwardRef((e,s)=>{let{className:r,children:t,...c}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.UC,{ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...c,children:[t,(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let f=e=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...r})};f.displayName="DialogHeader";let x=e=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...r})};x.displayName="DialogFooter";let h=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n.hE,{ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",r),...t})});h.displayName=n.hE.displayName;let p=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n.VY,{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",r),...t})});p.displayName=n.VY.displayName},57804:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(40157).A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},59434:(e,s,r)=>{"use strict";r.d(s,{cn:()=>n});var a=r(52596),t=r(39688);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,a.$)(s))}},60704:(e,s,r)=>{"use strict";r.d(s,{B8:()=>C,UC:()=>U,bL:()=>q,l9:()=>M});var a=r(12115),t=r(85185),n=r(46081),i=r(89196),d=r(28905),c=r(63540),l=r(94315),o=r(5845),u=r(61285),m=r(95155),f="Tabs",[x,h]=(0,n.A)(f,[i.RG]),p=(0,i.RG)(),[g,y]=x(f),j=a.forwardRef((e,s)=>{let{__scopeTabs:r,value:a,onValueChange:t,defaultValue:n,orientation:i="horizontal",dir:d,activationMode:f="automatic",...x}=e,h=(0,l.jH)(d),[p,y]=(0,o.i)({prop:a,onChange:t,defaultProp:n});return(0,m.jsx)(g,{scope:r,baseId:(0,u.B)(),value:p,onValueChange:y,orientation:i,dir:h,activationMode:f,children:(0,m.jsx)(c.sG.div,{dir:h,"data-orientation":i,...x,ref:s})})});j.displayName=f;var v="TabsList",b=a.forwardRef((e,s)=>{let{__scopeTabs:r,loop:a=!0,...t}=e,n=y(v,r),d=p(r);return(0,m.jsx)(i.bL,{asChild:!0,...d,orientation:n.orientation,dir:n.dir,loop:a,children:(0,m.jsx)(c.sG.div,{role:"tablist","aria-orientation":n.orientation,...t,ref:s})})});b.displayName=v;var N="TabsTrigger",w=a.forwardRef((e,s)=>{let{__scopeTabs:r,value:a,disabled:n=!1,...d}=e,l=y(N,r),o=p(r),u=E(l.baseId,a),f=R(l.baseId,a),x=a===l.value;return(0,m.jsx)(i.q7,{asChild:!0,...o,focusable:!n,active:x,children:(0,m.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...d,ref:s,onMouseDown:(0,t.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:(0,t.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:(0,t.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;x||n||!e||l.onValueChange(a)})})})});w.displayName=N;var A="TabsContent",k=a.forwardRef((e,s)=>{let{__scopeTabs:r,value:t,forceMount:n,children:i,...l}=e,o=y(A,r),u=E(o.baseId,t),f=R(o.baseId,t),x=t===o.value,h=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(d.C,{present:n||x,children:r=>{let{present:a}=r;return(0,m.jsx)(c.sG.div,{"data-state":x?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:f,tabIndex:0,...l,ref:s,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&i})}})});function E(e,s){return"".concat(e,"-trigger-").concat(s)}function R(e,s){return"".concat(e,"-content-").concat(s)}k.displayName=A;var q=j,C=b,M=w,U=k},62523:(e,s,r)=>{"use strict";r.d(s,{p:()=>i});var a=r(95155),t=r(12115),n=r(59434);let i=t.forwardRef((e,s)=>{let{className:r,type:t,...i}=e;return(0,a.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...i})});i.displayName="Input"},63920:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(40157).A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},70273:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>B});var a=r(95155),t=r(12115),n=r(30285),i=r(62523),d=r(66695),c=r(26126),l=r(66424),o=r(17313),u=r(91394),m=r(88539),f=r(56671),x=r(54165),h=r(50286),p=r(13896),g=r(75074),y=r(38224);let j=(0,r(40157).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var v=r(77223),b=r(57804),N=r(63920),w=r(44838),A=r(35317),k=r(56104),E=r(6033),R=r(68598),q=r(22424);async function C(e,s,r,a,t){try{let n=(0,R.Wi)({fromUserId:e,toUserId:s,fromUsername:r,toUsername:a,message:t||""});if(!n.isValid)return{success:!1,error:n.errors.join(", ")};if((await S(e,s)).areFriends)return{success:!1,error:"Users are already friends"};if(await _(e,s))return{success:!1,error:"Friend request already sent"};let i={fromUserId:e,toUserId:s,fromUsername:r,toUsername:a,status:"pending",createdAt:new Date,updatedAt:new Date,message:t},d=await (0,A.gS)((0,A.rJ)(k.db,"friendRequests"),{...i,createdAt:(0,A.O5)(),updatedAt:(0,A.O5)()});try{await (0,q.hR)(s,r,e)}catch(e){console.error("Error sending friend request notification:",e)}return{success:!0,requestId:d.id}}catch(n){return console.error("Error sending friend request:",n),E.$2.messageSend(e,{operation:"sendFriendRequest",fromUserId:e,toUserId:s,fromUsername:r,toUsername:a,message:t},"medium"),{success:!1,error:"Failed to send friend request"}}}async function M(e,s){try{let r=await (0,A.x7)((0,A.H9)(k.db,"friendRequests",e));if(!r.exists())return{success:!1,error:"Friend request not found"};let a=r.data();if(a.toUserId!==s)return{success:!1,error:"Unauthorized to accept this request"};if("pending"!==a.status)return{success:!1,error:"Request is no longer pending"};await (0,A.mZ)((0,A.H9)(k.db,"friendRequests",e),{status:"accepted",updatedAt:(0,A.O5)()});let t={users:[a.fromUserId,a.toUserId],usernames:[a.fromUsername,a.toUsername],createdAt:new Date,status:"active"};return await (0,A.gS)((0,A.rJ)(k.db,"friendships"),{...t,createdAt:(0,A.O5)()}),{success:!0}}catch(r){return console.error("Error accepting friend request:",r),E.$2.messageSend(s,{operation:"acceptFriendRequest",requestId:e,userId:s},"medium"),{success:!1,error:"Failed to accept friend request"}}}async function U(e,s){try{let r=await (0,A.x7)((0,A.H9)(k.db,"friendRequests",e));if(!r.exists())return{success:!1,error:"Friend request not found"};if(r.data().toUserId!==s)return{success:!1,error:"Unauthorized to reject this request"};return await (0,A.mZ)((0,A.H9)(k.db,"friendRequests",e),{status:"rejected",updatedAt:(0,A.O5)()}),{success:!0}}catch(e){return console.error("Error rejecting friend request:",e),{success:!1,error:"Failed to reject friend request"}}}async function D(e,s){try{let r=(0,A.P)((0,A.rJ)(k.db,"friendships"),(0,A._M)("users","array-contains",e)),a=await (0,A.GG)(r),t=null;if(a.forEach(e=>{e.data().users.includes(s)&&(t=e)}),!t)return{success:!1,error:"Friendship not found"};return await (0,A.kd)(t.ref),{success:!0}}catch(e){return console.error("Error removing friend:",e),{success:!1,error:"Failed to remove friend"}}}async function I(e){try{let s=(0,A.P)((0,A.rJ)(k.db,"friendships"),(0,A._M)("users","array-contains",e),(0,A._M)("status","==","active")),r=await (0,A.GG)(s),a=[];return r.forEach(s=>{let r=s.data(),t=+(0===r.users.indexOf(e)),n=r.users[t],i=r.usernames[t];a.push({userId:n,username:i,status:"offline",lastSeen:new Date})}),{success:!0,friends:a}}catch(e){return console.error("Error getting user friends:",e),{success:!1,error:"Failed to get friends"}}}async function F(e){try{let s=(0,A.P)((0,A.rJ)(k.db,"friendRequests"),(0,A._M)("toUserId","==",e),(0,A._M)("status","==","pending"),(0,A.My)("createdAt","desc")),r=await (0,A.GG)(s),a=[];return r.forEach(e=>{var s,r;let t=e.data();a.push({id:e.id,...t,createdAt:(null==(s=t.createdAt)?void 0:s.toDate())||new Date,updatedAt:(null==(r=t.updatedAt)?void 0:r.toDate())||new Date})}),{success:!0,requests:a}}catch(e){return console.error("Error getting pending friend requests:",e),{success:!1,error:"Failed to get friend requests"}}}async function S(e,s){try{let r=(0,A.P)((0,A.rJ)(k.db,"friendships"),(0,A._M)("users","array-contains",e)),a=await (0,A.GG)(r),t=null;if(a.forEach(e=>{let r=e.data();r.users.includes(s)&&(t=r)}),t)return{areFriends:!0,status:t.status};return{areFriends:!1}}catch(e){return console.error("Error checking friendship status:",e),{areFriends:!1}}}async function _(e,s){try{let t=(0,A.P)((0,A.rJ)(k.db,"friendRequests"),(0,A._M)("fromUserId","==",e),(0,A._M)("toUserId","==",s),(0,A._M)("status","==","pending")),n=await (0,A.GG)(t);if(!n.empty){var r,a;let e=n.docs[0],s=e.data();return{id:e.id,...s,createdAt:(null==(r=s.createdAt)?void 0:r.toDate())||new Date,updatedAt:(null==(a=s.updatedAt)?void 0:a.toDate())||new Date}}return null}catch(e){return console.error("Error getting pending friend request:",e),null}}async function G(e,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{let a=(0,A.P)((0,A.rJ)(k.db,"users"),(0,A._M)("username",">=",e),(0,A._M)("username","<=",e+"")),t=await (0,A.GG)(a),n=[];return t.forEach(e=>{let r=e.data();e.id!==s&&n.push({userId:e.id,username:r.username||"",displayName:r.displayName,avatar:r.avatar,status:"offline",lastSeen:new Date})}),{success:!0,users:n.slice(0,r)}}catch(e){return console.error("Error searching users:",e),{success:!1,error:"Failed to search users"}}}let z=new Map;function B(){let[e,s]=(0,t.useState)([]),[r,E]=(0,t.useState)([]),[R,q]=(0,t.useState)([]),[S,_]=(0,t.useState)(""),[B,P]=(0,t.useState)(!1),[L,V]=(0,t.useState)(null),[H,J]=(0,t.useState)(""),[T,$]=(0,t.useState)(!1),[O,Z]=(0,t.useState)(!0),K={id:"current-user-id",username:"current-user"};(0,t.useEffect)(()=>(X(),Q(),()=>{var e=K.id;let s=z.get(e);s&&(s(),z.delete(e))}),[]);let X=async()=>{try{let[e,r]=await Promise.all([I(K.id),F(K.id)]);e.success&&e.friends&&s(e.friends),r.success&&r.requests&&E(r.requests)}catch(e){console.error("Error loading initial data:",e),f.oR.error("Error al cargar datos de amigos")}finally{Z(!1)}},Q=()=>{!function(e,s){let r=(0,A.P)((0,A.rJ)(k.db,"friendRequests"),(0,A._M)("toUserId","==",e),(0,A._M)("status","==","pending"),(0,A.My)("createdAt","desc"));(0,A.aQ)(r,e=>{let r=[];e.forEach(e=>{var s,a;let t=e.data();r.push({id:e.id,...t,createdAt:(null==(s=t.createdAt)?void 0:s.toDate())||new Date,updatedAt:(null==(a=t.updatedAt)?void 0:a.toDate())||new Date})}),s(r)})}(K.id,e=>{E(e)}),function(e,s){let r=(0,A.P)((0,A.rJ)(k.db,"friendships"),(0,A._M)("users","array-contains",e),(0,A._M)("status","==","active"));(0,A.aQ)(r,r=>{let a=[];r.forEach(s=>{let r=s.data(),t=+(0===r.users.indexOf(e)),n=r.users[t],i=r.usernames[t];a.push({userId:n,username:i,status:"offline",lastSeen:new Date})}),s(a)})}(K.id,e=>{s(e)})},W=async()=>{if(!S.trim())return void q([]);P(!0);try{let e=await G(S,K.id);e.success&&e.users?q(e.users):f.oR.error(e.error||"Error al buscar usuarios")}catch(e){console.error("Error searching users:",e),f.oR.error("Error al buscar usuarios")}finally{P(!1)}},Y=async()=>{if(L)try{let e=await C(K.id,L.userId,K.username,L.username,H);e.success?(f.oR.success("Solicitud de amistad enviada"),$(!1),V(null),J(""),q(e=>e.filter(e=>e.userId!==L.userId))):f.oR.error(e.error||"Error al enviar solicitud")}catch(e){console.error("Error sending friend request:",e),f.oR.error("Error al enviar solicitud de amistad")}},ee=async e=>{try{let s=await M(e,K.id);s.success?f.oR.success("Solicitud de amistad aceptada"):f.oR.error(s.error||"Error al aceptar solicitud")}catch(e){console.error("Error accepting friend request:",e),f.oR.error("Error al aceptar solicitud")}},es=async e=>{try{let s=await U(e,K.id);s.success?f.oR.success("Solicitud de amistad rechazada"):f.oR.error(s.error||"Error al rechazar solicitud")}catch(e){console.error("Error rejecting friend request:",e),f.oR.error("Error al rechazar solicitud")}},er=async e=>{try{let s=await D(K.id,e);s.success?f.oR.success("Amigo eliminado"):f.oR.error(s.error||"Error al eliminar amigo")}catch(e){console.error("Error removing friend:",e),f.oR.error("Error al eliminar amigo")}},ea=e=>{switch(e){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";default:return"bg-gray-500"}};return O?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{children:"Cargando amigos..."})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6 max-w-6xl",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Amigos"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Gestiona tus amigos y solicitudes de amistad"})]}),(0,a.jsxs)(o.tU,{defaultValue:"friends",className:"space-y-6",children:[(0,a.jsxs)(o.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(o.Xi,{value:"friends",className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),"Amigos (",e.length,")"]}),(0,a.jsxs)(o.Xi,{value:"requests",className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),"Solicitudes (",r.length,")"]}),(0,a.jsxs)(o.Xi,{value:"search",className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),"Buscar"]})]}),(0,a.jsx)(o.av,{value:"friends",className:"space-y-4",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Mis Amigos"}),(0,a.jsx)(d.BT,{children:"Lista de todos tus amigos conectados"})]}),(0,a.jsx)(d.Wu,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"A\xfan no tienes amigos. \xa1Busca usuarios para agregar!"})]}):(0,a.jsx)(l.F,{className:"h-96",children:(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(u.eu,{children:[(0,a.jsx)(u.BK,{src:e.avatar}),(0,a.jsx)(u.q5,{children:e.username.charAt(0).toUpperCase()})]}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-background ".concat(ea(e.status))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.displayName||e.username}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["@",e.username]}),(0,a.jsx)(c.E,{variant:"outline",className:"text-xs",children:e.status})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"sm",children:(0,a.jsx)(y.A,{className:"h-4 w-4"})}),(0,a.jsxs)(w.rI,{children:[(0,a.jsx)(w.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",size:"sm",children:(0,a.jsx)(j,{className:"h-4 w-4"})})}),(0,a.jsx)(w.SQ,{children:(0,a.jsxs)(w._2,{onClick:()=>er(e.userId),className:"text-destructive",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Eliminar amigo"]})})]})]})]},e.userId))})})})]})}),(0,a.jsx)(o.av,{value:"requests",className:"space-y-4",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Solicitudes de Amistad"}),(0,a.jsx)(d.BT,{children:"Solicitudes pendientes de otros usuarios"})]}),(0,a.jsx)(d.Wu,{children:0===r.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(p.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No tienes solicitudes de amistad pendientes"})]}):(0,a.jsx)(l.F,{className:"h-96",children:(0,a.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u.eu,{children:(0,a.jsx)(u.q5,{children:e.fromUsername.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium",children:["@",e.fromUsername]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()}),e.message&&(0,a.jsxs)("p",{className:"text-sm mt-1 p-2 bg-muted rounded",children:['"',e.message,'"']})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(n.$,{size:"sm",onClick:()=>ee(e.id),children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"Aceptar"]}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>es(e.id),children:[(0,a.jsx)(N.A,{className:"h-4 w-4 mr-1"}),"Rechazar"]})]})]},e.id))})})})]})}),(0,a.jsx)(o.av,{value:"search",className:"space-y-4",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Buscar Usuarios"}),(0,a.jsx)(d.BT,{children:"Encuentra nuevos amigos para agregar"})]}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.p,{placeholder:"Buscar por nombre de usuario...",value:S,onChange:e=>_(e.target.value),onKeyPress:e=>"Enter"===e.key&&W()}),(0,a.jsx)(n.$,{onClick:W,disabled:B,children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]}),R.length>0&&(0,a.jsx)(l.F,{className:"h-96",children:(0,a.jsx)("div",{className:"space-y-3",children:R.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(u.eu,{children:[(0,a.jsx)(u.BK,{src:e.avatar}),(0,a.jsx)(u.q5,{children:e.username.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.displayName||e.username}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["@",e.username]}),e.mutualFriends&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.mutualFriends," amigos en com\xfan"]})]})]}),(0,a.jsxs)(x.lG,{open:T&&(null==L?void 0:L.userId)===e.userId,onOpenChange:$,children:[(0,a.jsx)(x.zM,{asChild:!0,children:(0,a.jsxs)(n.$,{size:"sm",onClick:()=>V(e),children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Agregar"]})}),(0,a.jsxs)(x.Cf,{children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Enviar Solicitud de Amistad"}),(0,a.jsxs)(x.rr,{children:["Enviar solicitud de amistad a @",e.username]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(m.T,{placeholder:"Mensaje opcional...",value:H,onChange:e=>J(e.target.value),maxLength:500}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[H.length,"/500 caracteres"]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>$(!1),children:"Cancelar"}),(0,a.jsx)(n.$,{onClick:Y,children:"Enviar Solicitud"})]})]})]})]},e.userId))})}),S&&0===R.length&&!B&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No se encontraron usuarios con ese nombre"})]})]})]})})]})]})}},77223:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},88539:(e,s,r)=>{"use strict";r.d(s,{T:()=>i});var a=r(95155),t=r(12115),n=r(59434);let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...t})});i.displayName="Textarea"},91394:(e,s,r)=>{"use strict";r.d(s,{BK:()=>c,eu:()=>d,q5:()=>l});var a=r(95155),t=r(12115),n=r(85977),i=r(59434);let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...t})});d.displayName=n.bL.displayName;let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",r),...t})});c.displayName=n._V.displayName;let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(n.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...t})});l.displayName=n.H4.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[9135,7210,5769,9863,3856,9550,5679,8722,5135,3421,3181,9892,4260,8441,1684,7358],()=>s(21903)),_N_E=e.O()}]);